
@{
    Layout = "~/Views/Shared/Layouts/_AdminLayout.cshtml";
    ViewData["Title"] = "User Listing";
}
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
<style>
    body {
        margin-top: 20px;
        background: #eee;
    }

    .card {
        box-shadow: 0 20px 27px 0 rgb(0 0 0 / 5%);
    }

    .avatar.sm {
        width: 2.25rem;
        height: 2.25rem;
        font-size: .818125rem;
    }

    .table-nowrap .table td, .table-nowrap .table th {
        white-space: nowrap;
    }

    .table > :not(caption) > * > * {
        padding: 0.75rem 1.25rem;
        border-bottom-width: 1px;
    }

    table th {
        font-weight: 600;
        background-color: #eeecfd !important;
    }
</style>
<div class="container">
    <div class="row">
        <div class="col-12 mb-3 mb-lg-5">
            <div class="overflow-hidden card table-nowrap table-card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Users</h5>
                </div>
                <div class="table-responsive">
                    <table id="userTable" class="table mb-0">
                        <thead class="small text-uppercase bg-body text-muted">
                            <tr>
                                <th>userId</th>
                                <th>UserName</th>
                                <th>Role</th>
                                <th>Email</th>
                                @* <th>roleId</th> *@ 
                                @* <th>IsBlocked</th>
                                <th class="text-end">Action</th> *@
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


@section Scripts {

    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" />
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables-buttons/3.2.4/js/dataTables.buttons.min.js" integrity="sha512-lHhAvFV+28ofgyGEAzTZtYPyO+RMr9qAD5VBK62atucL3xn9TDMplSAtwnnQ7P1OyxCDOCfStK5qz3gfQW6r/A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables-buttons/3.2.4/js/buttons.colVis.js" integrity="sha512-x4yAAtM/sqN+t2k2LekDGL8kR11Xd4lhRR6QGr/ENTM+5sgS8mr24nDVMbjsDwKEy8BdFAd1sCZXSBnXl2S6KA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.datatables.net/buttons/3.2.4/js/buttons.dataTables.js"></script>
    
    <script>
        $(document).ready(function () {
            var object = {
                0 : "UserName",
                1 : "RoleName",
                2 : "Email"
            }
            $('#userTable').DataTable({
                processing: true,
                serverSide: true,
                searching: true,
                ajax: {
                    url: '/Admin/LoadUser',
                    type: 'POST',
                    data: function (d) {
                        console.log(d);
                        return {
                            Draw : d.draw,
                            start: d.start,
                            length: d.length,
                            SearchValue: d.search.value,
                            SortColumn:object[d.order[0].column],
                            SortDirection:d.order[0].dir,
                        };
                    },
                    // "dataSrc":function (d){
                    //    return d;
                    // }
                },
                columns: [
                    {data:'userId'},
                    {data:'userName'},
                    {data:'roleName'},
                    {data:'email'}
                ],
                layout: {
                  topEnd: {
                    buttons: [
                      {
                        extend: "colvis",
                        collectionLayout: "fixed columns",
                        className: "btn-light py-1 mb-1",
                      },
                      {
                        extend: "colvis",
                      },
                    ],
                  },
                },
            });
        });
    </script>
}